<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <title></title>
</head>

<body>

    <script>
        b();
        function a() {
            createPromise(false, 1)
                .then(function (data) { console.log(data); return createPromise(false, data + 1) })
                .then(function (data) { console.log(data); return createPromise(false, data + 1) })
                .then(function (data) { console.log(data); return createPromise(false, data + 1) })
                .then(function (data) { console.log(data); return createPromise(true, data + 1) })
                .then(function (data) { console.log(data); return createPromise(false, data + 1) })
                .then(function (data) { console.log(data); return createPromise(false, data + 1) })
                .then(function (data) { console.log(data); return createPromise(false, data + 1) })
                .then(function (data) { console.log(data); return createPromise(false, data + 1) })
                .then(function (data) { console.log(data); return createPromise(false, data + 1) })
                .then(function (data) { console.log(data); return createPromise(false, data + 1) })
                .then(function (data) { console.log(data); return createPromise(false, data + 1) })
                .catch(function () { console.log('catch'); });
        }

        async function b() {
            try {
                var data = await createPromise(false, 1);
                console.log(data);
                data = await createPromise(false, data + 1);
                console.log(data);
                data = await createPromise(false, data + 1);
                console.log(data);
                data = await createPromise(true, data + 1);
                console.log(data);
                data = await createPromise(false, data + 1);
                console.log(data);
                data = await createPromise(false, data + 1);
                console.log(data);
            }
            catch {
                console.log('catch');
            }
        }


        function createPromise(willFail, value) {
            return new Promise(
                function (resolve, reject) {
                    if (willFail) reject();
                    else resolve(value);
                }
            )
        }